<!-- Company Register Form -->
<div class="company-register-form">
  
  <!-- Header Section -->
  <div class="form-header">
    <h1>Registro de Empresa</h1>
    <p>Complete la información de su empresa para comenzar</p>
  </div>
  
  <!-- Mensajes de estado -->
  <div *ngIf="errorMessage()" class="register-alert register-alert-danger" role="alert">
    <i class="fas fa-exclamation-triangle"></i>
    {{ errorMessage() }}
  </div>
  
  <div *ngIf="successMessage()" class="register-alert register-alert-success" role="alert">
    <i class="fas fa-check-circle"></i>
    {{ successMessage() }}
  </div>

  <form (ngSubmit)="onSubmit()" #registerForm="ngForm">
    
    <!-- Sección: Datos Básicos -->
    <div class="form-section">
      <div class="section-header" (click)="toggleSection('basicInfo')">
        <h3>
          <i class="fas fa-building"></i>
          Datos Básicos de la Empresa
          <i class="fas fa-chevron-down" [class.rotated]="!sectionsCollapsed().basicInfo"></i>
        </h3>
      </div>
      
      <div class="section-content" [class.collapsed]="sectionsCollapsed().basicInfo">
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="companyName">Nombre de la Empresa *</label>
              <input 
                type="text" 
                id="companyName"
                class="form-control" 
                [(ngModel)]="form().name" 
                name="companyName"
                placeholder="Ingrese el nombre de la empresa"
                required>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="taxId">Tax ID *</label>
              <input 
                type="text" 
                id="taxId"
                class="form-control" 
                [(ngModel)]="form().taxId" 
                name="taxId"
                placeholder="Ingrese el Tax ID"
                required>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sección: Direcciones -->
    <div class="form-section">
      <div class="section-header" (click)="toggleSection('addresses')">
        <h3>
          <i class="fas fa-map-marker-alt"></i>
          Direcciones ({{ form().addresses.length }})
          <i class="fas fa-chevron-down" [class.rotated]="!sectionsCollapsed().addresses"></i>
        </h3>
      </div>
      
      <div class="section-content" [class.collapsed]="sectionsCollapsed().addresses">
        <div *ngFor="let address of form().addresses; let i = index" class="contact-item">
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label>Tipo de Dirección *</label>
                <select 
                  class="form-control" 
                  [(ngModel)]="address.addressType" 
                  [name]="'addressType' + i"
                  required>
                  <option value="">Seleccione tipo</option>
                  <option *ngFor="let type of address.addressTypeOptions" [value]="type.id">
                    {{ type.name }}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Dirección *</label>
                <input 
                  type="text" 
                  class="form-control" 
                  [(ngModel)]="address.address" 
                  [name]="'address' + i"
                  placeholder="Ingrese la dirección completa"
                  required>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label>&nbsp;</label>
                <div class="form-control-static">
                  <div class="form-check">
                    <input 
                      type="checkbox" 
                      class="form-check-input" 
                      [(ngModel)]="address.isPrimary" 
                      [name]="'addressPrimary' + i"
                      id="addressPrimary{{ i }}">
                    <label class="form-check-label" for="addressPrimary{{ i }}">
                      Principal
                    </label>
                  </div>
                  <button 
                    type="button" 
                    class="btn btn-sm btn-outline-danger mt-2"
                    (click)="removeAddress(i)"
                    [disabled]="form().addresses.length === 1">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <button type="button" class="btn btn-outline-primary" (click)="addAddress()">
          <i class="fas fa-plus"></i> Agregar Dirección
        </button>
      </div>
    </div>

    <!-- Sección: Emails -->
    <div class="form-section">
      <div class="section-header" (click)="toggleSection('emails')">
        <h3>
          <i class="fas fa-envelope"></i>
          Emails ({{ form().emails.length }})
          <i class="fas fa-chevron-down" [class.rotated]="!sectionsCollapsed().emails"></i>
        </h3>
      </div>
      
      <div class="section-content" [class.collapsed]="sectionsCollapsed().emails">
        <div *ngFor="let email of form().emails; let i = index" class="contact-item">
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label>Tipo de Email *</label>
                <select 
                  class="form-control" 
                  [(ngModel)]="email.emailType" 
                  [name]="'emailType' + i"
                  required>
                  <option value="">Seleccione tipo</option>
                  <option *ngFor="let type of email.emailTypeOptions" [value]="type.id">
                    {{ type.name }}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Email *</label>
                <input 
                  type="email" 
                  class="form-control" 
                  [(ngModel)]="email.email" 
                  [name]="'email' + i"
                  placeholder="ejemplo@empresa.com"
                  required>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label>&nbsp;</label>
                <div class="form-control-static">
                  <div class="form-check">
                    <input 
                      type="checkbox" 
                      class="form-check-input" 
                      [(ngModel)]="email.isPrimary" 
                      [name]="'emailPrimary' + i"
                      id="emailPrimary{{ i }}">
                    <label class="form-check-label" for="emailPrimary{{ i }}">
                      Principal
                    </label>
                  </div>
                  <button 
                    type="button" 
                    class="btn btn-sm btn-outline-danger mt-2"
                    (click)="removeEmail(i)"
                    [disabled]="form().emails.length === 1">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <button type="button" class="btn btn-outline-primary" (click)="addEmail()">
          <i class="fas fa-plus"></i> Agregar Email
        </button>
      </div>
    </div>

    <!-- Sección: Teléfonos -->
    <div class="form-section">
      <div class="section-header" (click)="toggleSection('phones')">
        <h3>
          <i class="fas fa-phone"></i>
          Teléfonos ({{ form().phones.length }})
          <i class="fas fa-chevron-down" [class.rotated]="!sectionsCollapsed().phones"></i>
        </h3>
      </div>
      
      <div class="section-content" [class.collapsed]="sectionsCollapsed().phones">
        <div *ngFor="let phone of form().phones; let i = index" class="contact-item">
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label>Tipo de Teléfono *</label>
                <select 
                  class="form-control" 
                  [(ngModel)]="phone.phoneType" 
                  [name]="'phoneType' + i"
                  required>
                  <option value="">Seleccione tipo</option>
                  <option *ngFor="let type of phone.phoneTypeOptions" [value]="type.id">
                    {{ type.name }}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Teléfono *</label>
                <input 
                  type="tel" 
                  class="form-control" 
                  [(ngModel)]="phone.phone" 
                  [name]="'phone' + i"
                  placeholder="+1 (555) 123-4567"
                  required>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label>&nbsp;</label>
                <div class="form-control-static">
                  <div class="form-check">
                    <input 
                      type="checkbox" 
                      class="form-check-input" 
                      [(ngModel)]="phone.isPrimary" 
                      [name]="'phonePrimary' + i"
                      id="phonePrimary{{ i }}">
                    <label class="form-check-label" for="phonePrimary{{ i }}">
                      Principal
                    </label>
                  </div>
                  <button 
                    type="button" 
                    class="btn btn-sm btn-outline-danger mt-2"
                    (click)="removePhone(i)"
                    [disabled]="form().phones.length === 1">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <button type="button" class="btn btn-outline-primary" (click)="addPhone()">
          <i class="fas fa-plus"></i> Agregar Teléfono
        </button>
      </div>
    </div>

    <!-- Sección: Redes Sociales -->
    <div class="form-section">
      <div class="section-header" (click)="toggleSection('socialMedias')">
        <h3>
          <i class="fas fa-share-alt"></i>
          Redes Sociales ({{ form().socialMedias.length }})
          <i class="fas fa-chevron-down" [class.rotated]="!sectionsCollapsed().socialMedias"></i>
        </h3>
      </div>
      
      <div class="section-content" [class.collapsed]="sectionsCollapsed().socialMedias">
        <div *ngFor="let social of form().socialMedias; let i = index" class="contact-item">
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label>Tipo de Red Social *</label>
                <select 
                  class="form-control" 
                  [(ngModel)]="social.socialMediaType" 
                  [name]="'socialMediaType' + i"
                  required>
                  <option value="">Seleccione tipo</option>
                  <option *ngFor="let type of social.socialMediaTypeOptions" [value]="type.id">
                    {{ type.name }}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>URL *</label>
                <input 
                  type="url" 
                  class="form-control" 
                  [(ngModel)]="social.url" 
                  [name]="'socialUrl' + i"
                  placeholder="https://www.ejemplo.com"
                  required>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label>&nbsp;</label>
                <div class="form-control-static">
                  <div class="form-check">
                    <input 
                      type="checkbox" 
                      class="form-check-input" 
                      [(ngModel)]="social.isPrimary" 
                      [name]="'socialPrimary' + i"
                      id="socialPrimary{{ i }}">
                    <label class="form-check-label" for="socialPrimary{{ i }}">
                      Principal
                    </label>
                  </div>
                  <button 
                    type="button" 
                    class="btn btn-sm btn-outline-danger mt-2"
                    (click)="removeSocialMedia(i)"
                    [disabled]="form().socialMedias.length === 1">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <button type="button" class="btn btn-outline-primary" (click)="addSocialMedia()">
          <i class="fas fa-plus"></i> Agregar Red Social
        </button>
      </div>
    </div>

    <!-- Sección: Empleados -->
    <div class="form-section">
      <div class="section-header" (click)="toggleSection('employees')">
        <h3>
          <i class="fas fa-users"></i>
          Empleados ({{ form().employees.length }})
          <i class="fas fa-chevron-down" [class.rotated]="!sectionsCollapsed().employees"></i>
        </h3>
      </div>
      
      <div class="section-content" [class.collapsed]="sectionsCollapsed().employees">
        <div *ngFor="let employee of form().employees; let i = index" class="contact-item">
          <div class="row">
            <div class="col-md-3">
              <div class="form-group">
                <label>Nombre Completo *</label>
                <input 
                  type="text" 
                  class="form-control" 
                  [(ngModel)]="employee.fullName" 
                  [name]="'employeeName' + i"
                  placeholder="Nombre completo"
                  required>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <label>Email *</label>
                <input 
                  type="email" 
                  class="form-control" 
                  [(ngModel)]="employee.email" 
                  [name]="'employeeEmail' + i"
                  placeholder="email@ejemplo.com"
                  required>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label>Teléfono</label>
                <input 
                  type="tel" 
                  class="form-control" 
                  [(ngModel)]="employee.phone" 
                  [name]="'employeePhone' + i"
                  placeholder="+1 (555) 123-4567">
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label>Posición</label>
                <input 
                  type="text" 
                  class="form-control" 
                  [(ngModel)]="employee.position" 
                  [name]="'employeePosition' + i"
                  placeholder="Cargo">
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label>&nbsp;</label>
                <div class="form-control-static">
                  <button 
                    type="button" 
                    class="btn btn-sm btn-outline-danger"
                    (click)="removeEmployee(i)"
                    [disabled]="form().employees.length === 1">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <button type="button" class="btn btn-outline-primary" (click)="addEmployee()">
          <i class="fas fa-plus"></i> Agregar Empleado
        </button>
      </div>
    </div>

    <!-- Botones de acción -->
    <div class="form-actions">
      <button 
        type="submit" 
        class="btn btn-primary btn-lg"
        [disabled]="isLoading()">
        <i *ngIf="isLoading()" class="fas fa-spinner fa-spin"></i>
        <i *ngIf="!isLoading()" class="fas fa-save"></i>
        {{ isLoading() ? 'Registrando...' : 'Registrar Empresa' }}
      </button>
      
      <button 
        type="button" 
        class="btn btn-secondary btn-lg ml-3"
        (click)="router.navigate(['/login'])">
        <i class="fas fa-arrow-left"></i>
        Volver al Login
      </button>
    </div>

  </form>
</div>

